[transmogrifier]
title = Content importer
description = Creates content from email message
pipeline =
    consumer
    folders
    logger
    constructor
    remove_id
    update_content
    commit

[consumer]
blueprint = rabbitpy.consumer
queue = import.sport
queue_auto_delete = false
ack = false

[folders]
blueprint = plone.folders

[constructor]
blueprint = plone.constructor

[remove_id]
blueprint = transmogrifier.del
keys =
    id

[update_content]
blueprint = plone.rfc822.import

[commit]
blueprint = transmogrifier.to_expression
modules = transaction
expression = python:modules['transaction'].commit()
mode = items

[breakpoint]
blueprint = transmogrifier.breakpoint

[logger]
blueprint = transmogrifier.logger
name = logger
level = ERROR
